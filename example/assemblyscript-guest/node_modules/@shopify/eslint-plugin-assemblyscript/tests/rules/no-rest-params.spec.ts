import rule from '../../lib/rules/no-rest-params';
import { RuleTester } from 'eslint';

const ruleTester = new RuleTester({
  parser: require.resolve('@typescript-eslint/parser'),
  parserOptions: {
    sourceType: 'module',
    ecmaVersion: 6,
  }
});

ruleTester.run('no-rest-params', rule, {
  valid: [
    'function foo(bar: u16[]): u16 { return 1337; }',
    'function foo(bar: Array<u16>): u16 { return 1337;}',
    '(bar: u16[]): u16 => { return 1337; }',
    '(bar: Array<u16>): u16 => { return 1337; }'
  ],
  invalid: [
    { code: 'function foo(...bar: u16): u16 { return 1337; }', errors: [{ message: "rest params are not supported."}] },
    { code: '(...bar: u16): u16 => { return 1337; }', errors: [{ message: "rest params are not supported."}] },
    { code: '(...bar: u16): u16 => { return 1337; }', errors: [{ message: "rest params are not supported."}] },
    { code: '(foo: u16, ...bar: u16): u16 => { return 1337; }', errors: [{ message: "rest params are not supported."}] },
  ]
});
